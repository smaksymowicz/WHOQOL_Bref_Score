<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>WHOQOL-BREF - Score (wersja polska poprawiona)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: #2c3e50; }
    .question { margin-bottom: 20px; }
    .options label { margin-right: 10px; }
    .results { margin-top: 30px; font-weight: bold; white-space: pre-wrap; }
    button { padding: 10px 20px; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Narzędzie do obliczania wyników z kwestionariusza WHOQOL-Bref (wersja polska poprawiona)</h1>
  <p>(wykorzystanie z podaniem źródła: "WHOQOL-Bref Score, Stanisław Maksymowicz, SZP UWM w Olsztynie"
kontakt: stanislaw.maksymowicz@uwm.edu.pl)</p>
<p>Instrukcja: w polach tabeli przy każdym z pytań należy odwzorować udzielone odpowiedzi wpisane w papierowym kwestionariuszu, zgodnie z jego graficznym układem (od lewej do prawej), wpisując w komórkę dowolny znak (np. X). Można wpisac tylko jeden znak na wiersz. Po wypełnieniu wszystkich pytań, pod tabelą podane zostaną wyniki: surowe, w skali 4-20 i 0-100 oraz ich interpretacja. W przypadku błędów, należy przejrzeć tabelę z wpisywanymi odpowiedziami. 
</p>

  <form id="quizForm">
    <div id="questions"></div>
    <button type="button" onclick="calculateScore()">Oblicz wynik</button>
  </form>
  <div class="results" id="results"></div>

  <script>
    const questions = [
      "1. Jak oceniasz jakość swojego życia?",
      "2. Czy jesteś zadowolony/a ze swojego zdrowia?",
      "3. Jak bardzo ból fizyczny przeszkadzał Ci robić to, co musisz?",
      "4. W jakim stopniu potrzebujesz leczenia medycznego, by funkcjonować?",
      "5. Na ile cieszysz się życiem?",
      "6. W jakim stopniu oceniasz, że Twoje życie ma sens?",
      "7. Jak dobrze jesteś w stanie się skoncentrować?",
      "8. Jak bezpiecznie czujesz się w swoim codziennym życiu?",
      "9. W jakim stopniu Twoje otoczenie sprzyja zdrowiu?",
      "10. Czy masz wystarczająco energii w codziennym życiu?",
      "11. Czy jesteś w stanie zaakceptować swój wygląd zewnętrzny?",
      "12. Czy masz wystarczająco dużo pieniędzy na swoje potrzeby?",
      "13. Na ile dostępne są informacje, których możesz potrzebować w codziennym życiu?",
      "14. W jakim zakresie masz sposobność realizowania swoich codziennych zajęć?",
      "15. Jak dobrze możesz się poruszać w swoim otoczeniu?",
      "16. Czy jesteś zadowolony/a ze swojego snu?",
      "17. W jakim stopniu jesteś zadowolony/a ze swojego życia seksualnego?",
      "18. W jakim stopniu jesteś zadowolony/a ze swojego zdolności do pracy?",
      "19. Czy jesteś zadowolony/a z siebie?",
      "20. Czy jesteś zadowolony/a ze swoich osobistych relacji?",
      "21. Czy jesteś zadowolony/a ze swojego życia rodzinnego?",
      "22. Czy jesteś zadowolony/a z oparcia, wsparcia ze strony przyjaciół?",
      "23. Jak bardzo jesteś zadowolony/a ze swoich warunków mieszkaniowych?",
      "24. Jak bardzo jesteś zadowolony/a z dostępu do opieki zdrowotnej?",
      "25. Czy jesteś zadowolony/a z komunikacji (transportu, środków)?",
      "26. Jak często doświadczałeś/aś negatywnych uczuć (np. smutek, rozpacz)?"
    ];

    const domainMap = {
      physical: [3, 4, 10, 15, 16, 17, 18],
      psychological: [5, 6, 7, 11, 19, 26],
      social: [20, 21, 22],
      environment: [8, 9, 12, 13, 14, 23, 24, 25]
    };

    const questionsContainer = document.getElementById('questions');
    questions.forEach((q, index) => {
      const div = document.createElement('div');
      div.className = 'question';
      div.innerHTML = `<p>${q}</p>` +
        Array.from({ length: 5 }, (_, i) => `
          <label><input type="radio" name="q${index + 1}" value="${i + 1}" required> ${i + 1}</label>
        `).join('');
      questionsContainer.appendChild(div);
    });

    function calculateScore() {
      const form = document.getElementById('quizForm');
      const data = new FormData(form);
      const scores = { physical: 0, psychological: 0, social: 0, environment: 0 };
      const counts = { physical: 0, psychological: 0, social: 0, environment: 0 };

      for (let i = 1; i <= 26; i++) {
        const val = parseInt(data.get(`q${i}`));
        if (isNaN(val)) {
          alert("Proszę odpowiedzieć na wszystkie pytania.");
          return;
        }
        for (const domain in domainMap) {
          if (domainMap[domain].includes(i)) {
            scores[domain] += val;
            counts[domain]++;
          }
        }
      }

      let resultText = "Wyniki:\n";
      for (const domain in scores) {
        const raw = scores[domain];
        const mean = raw / counts[domain];
        const score20 = (mean * 4).toFixed(2);
        const score100 = ((mean - 1) * 25).toFixed(2);
        resultText += `\nDomena: ${domain.toUpperCase()}\n`;
        resultText += `  - Surowy wynik: ${raw}\n`;
        resultText += `  - Skala 4-20: ${score20}\n`;
        resultText += `  - Skala 0-100: ${score100}\n`;
      }

      resultText += "\nInterpretacja: Im wyższy wynik, tym lepsza jakość życia w danej domenie. Skala 0–100 pozwala łatwiej porównać wyniki między domenami."
      document.getElementById('results').innerText = resultText;
    }
  </script>
</body>
</html>
